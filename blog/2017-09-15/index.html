<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a1cb63a71440d7527afe.css">body{margin:0;padding:0;background-color:#f1f1f1}.container{overflow-x:hidden}:root{--width:700px;--color:#757575}.blog-post-container{max-width:var(--width);margin:0 auto;padding:2em}.gatsby-highlight{width:100vw;position:relative;margin-left:-50vw;left:50%}.gatsby-highlight code{width:var(--width);margin:0 auto;display:block}.header{height:120px}.header-link,.header-link:hover{color:#fefefe}.header-box{width:80px;height:100px;margin:0;font-size:50px;background-color:#1c0e00;text-align:right;display:-webkit-flex;display:flex;position:absolute;z-index:1;-webkit-align-items:flex-end;align-items:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}@media screen and (min-width:780px){.header-box{width:100px;height:120px;font-size:60px}.header-js{margin:0 24px 16px 0}}.header-js{font-weight:700;-webkit-align-items:baseline;align-items:baseline;margin:0 18px 12px 0;line-height:1}.color-bar{z-index:1;height:12px;margin:0;position:fixed;left:0;top:0;width:100%;border-width:0;display:block;background:repeating-linear-gradient(106deg,#1c0e00,#1c0e00 25%,#3a9586 0,#3a9586 50%,#fdb122 0,#fdb122 75%,#8e9aa3 0,#8e9aa3);background-blend-mode:multiply}.footer{margin:50px auto;font-size:14px;text-align:center;color:var(--color)}.blog-link{padding:64px 56px;display:block;background-color:#fff;border:1px solid #e5e5e5}.blog-wrapper{max-width:1000px;margin:0 auto}.blog{margin:5% 0 0;text-align:center}.blog-header{font-size:16px;color:var(--color)}.blog-body p{color:var(--color);margin-bottom:0}h2{font-size:1.7em;line-height:1.15;margin-bottom:.5em;margin-top:1.5em}a{color:#112739;text-decoration:none;position:relative}a:hover{color:#3a9486}a:hover:after,a:visited:hover:after{background:repeating-linear-gradient(116deg,transparent,transparent 3%,rgba(253,177,34,.56471) 0,rgba(253,177,34,.43922) 97%,transparent 0,transparent)}a:after{content:"";position:absolute;height:6px;width:110%;bottom:0;left:-5%;right:-5%;background:repeating-linear-gradient(116deg,transparent,transparent 3%,rgba(253,177,34,.25098) 0,rgba(253,177,34,.18824) 97%,transparent 0,transparent)}a.no-after:after{content:none}.nav{padding:40px 0 0;margin:0 auto;font-size:16px;text-align:center;color:var(--color)}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.1.31"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-0fcedd3d7a05c13b460f.js"/><link as="script" rel="preload" href="/styles-9e2611279c1056a5933e.js"/><link as="script" rel="preload" href="/app-5449960f462e3fe0f9c0.js"/><link as="script" rel="preload" href="/webpack-runtime-dd6a60cc76d6e60df095.js"/><link as="fetch" rel="preload" href="/static/d/630/path---blog-2017-09-15-fde-63d-7SbZRbaqnIyNZhVtHDDFmGJQRHQ.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="container"><header class="header"><a class="no-after"><div class="color-bar"></div></a><a class="header-link no-after" title="Ji Zhu" href="/"><figure class="header-box"><figcaption class="header-js">J</figcaption></figure></a><nav class="nav">github <a href="https://github.com/zhuji96">@zhuji96</a></nav></header><main><div class="blog-post-container"><div class="blog-post"><h1>读书笔记——JavaScript语言精粹</h1><h2>September 15, 2017</h2><div class="blog-post-content"><h2>函数是顶级对象</h2>
<blockquote>
<p>函数是有词法作用域的闭包</p>
</blockquote>
<h2>基于原型继承的动态对象</h2>
<blockquote>
<p>对象是无类别的，一个对象可以从另一个对象继承成员属性</p>
</blockquote>
<h2>对象字面量和数组字面量</h2>
<blockquote>
<p>这是JSON的灵感之源</p>
</blockquote>
<h2>经常会用到的一个方法</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> func<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//为了给对象增加方法能够少打prototype几个字而已</span></code></pre></div>
<h2>如何创建一个对象</h2>
<ol>
<li>对象字面量</li>
<li>new + 构造函数（不推荐）</li>
<li>Object.create方法继承一个已有对象</li>
<li>函数化构造，调用一个能返回对象的函数 （推荐）</li>
</ol>
<h3>示例</h3>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">mammal</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>spec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spec<span class="token punctuation">.</span>saying <span class="token operator">=</span> spec<span class="token punctuation">.</span>saying <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span><span class="token function-variable function">get_name</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> spec<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span><span class="token function-variable function">says</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> spec<span class="token punctuation">.</span>saying<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> that<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">cat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>spec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spec<span class="token punctuation">.</span>saying <span class="token operator">=</span> spec<span class="token punctuation">.</span>saying <span class="token operator">||</span> <span class="token string">'meow'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token function">mammal</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">,</span>
        super_says <span class="token operator">=</span> that<span class="token punctuation">.</span><span class="token function">superior</span><span class="token punctuation">(</span><span class="token string">'says'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span><span class="token function-variable function">says</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">super_says</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> spec<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> that<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//给所有对象增加一个superior方法，通过方法名返回函数，该函数会调用原来的方法</span>
Object<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'superior'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
        method <span class="token operator">=</span> that<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> myCat <span class="token operator">=</span> <span class="token function">cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Kitty'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCat<span class="token punctuation">.</span><span class="token function">says</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//meowKitty</span></code></pre></div>
<h2>判断一个对象是否是数组</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">is_array</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//真麻烦</span></code></pre></div>
<h2>reduce的手动实现</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Array<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'reduce'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//使用</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function-variable function">total</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>   <span class="token comment">//增加total属性不会改变length</span>
total <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//total:108</span></code></pre></div></div></div></div></main><footer class="footer">© <!-- -->2019<!-- --> ❤️ Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-template-js","jsonName":"blog-2017-09-15-fde","path":"/blog/2017-09-15"};window.dataPath="630/path---blog-2017-09-15-fde-63d-7SbZRbaqnIyNZhVtHDDFmGJQRHQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5449960f462e3fe0f9c0.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-0fcedd3d7a05c13b460f.js"],"component---src-pages-about-js":["/component---src-pages-about-js-a4407d7b8b2e97a8e31a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b32e2cecce55354ec614.js"],"pages-manifest":["/pages-manifest-30e2504f69b1383b1e0c.js"]};/*]]>*/</script><script src="/webpack-runtime-dd6a60cc76d6e60df095.js" async=""></script><script src="/app-5449960f462e3fe0f9c0.js" async=""></script><script src="/styles-9e2611279c1056a5933e.js" async=""></script><script src="/component---src-templates-blog-template-js-0fcedd3d7a05c13b460f.js" async=""></script></body></html>